{"ast":null,"code":"/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url(uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  var loc = loc || global.location;\n  if (null == uri) uri = loc.protocol + '//' + loc.hostname;\n\n  // relative path support\n  if ('string' == typeof uri) {\n    if ('/' == uri.charAt(0)) {\n      if ('undefined' != typeof loc) {\n        uri = loc.hostname + uri;\n      }\n    }\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' != typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n  obj.path = obj.path || '/';\n\n  // define unique id\n  obj.id = obj.protocol + '://' + obj.host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + obj.host + (loc && loc.port == obj.port ? '' : ':' + obj.port);\n  return obj;\n}","map":{"version":3,"names":["parseuri","require","debug","module","exports","url","uri","loc","obj","global","location","protocol","hostname","charAt","test","port","path","id","host","href"],"sources":["/home/y4n/node_modules/socket.io-client/lib/url.js"],"sourcesContent":["\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url(uri, loc){\n  var obj = uri;\n\n  // default to window.location\n  var loc = loc || global.location;\n  if (null == uri) uri = loc.protocol + '//' + loc.hostname;\n\n  // relative path support\n  if ('string' == typeof uri) {\n    if ('/' == uri.charAt(0)) {\n      if ('undefined' != typeof loc) {\n        uri = loc.hostname + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' != typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    }\n    else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  // define unique id\n  obj.id = obj.protocol + '://' + obj.host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + obj.host + (loc && loc.port == obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n"],"mappings":"AACA;AACA;AACA;;AAEA,IAAIA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAClC,IAAIC,KAAK,GAAGD,OAAO,CAAC,OAAO,CAAC,CAAC,sBAAsB,CAAC;;AAEpD;AACA;AACA;;AAEAE,MAAM,CAACC,OAAO,GAAGC,GAAG;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAC;EACpB,IAAIC,GAAG,GAAGF,GAAG;;EAEb;EACA,IAAIC,GAAG,GAAGA,GAAG,IAAIE,MAAM,CAACC,QAAQ;EAChC,IAAI,IAAI,IAAIJ,GAAG,EAAEA,GAAG,GAAGC,GAAG,CAACI,QAAQ,GAAG,IAAI,GAAGJ,GAAG,CAACK,QAAQ;;EAEzD;EACA,IAAI,QAAQ,IAAI,OAAON,GAAG,EAAE;IAC1B,IAAI,GAAG,IAAIA,GAAG,CAACO,MAAM,CAAC,CAAC,CAAC,EAAE;MACxB,IAAI,WAAW,IAAI,OAAON,GAAG,EAAE;QAC7BD,GAAG,GAAGC,GAAG,CAACK,QAAQ,GAAGN,GAAG;MAC1B;IACF;IAEA,IAAI,CAAC,qBAAqB,CAACQ,IAAI,CAACR,GAAG,CAAC,EAAE;MACpCJ,KAAK,CAAC,sBAAsB,EAAEI,GAAG,CAAC;MAClC,IAAI,WAAW,IAAI,OAAOC,GAAG,EAAE;QAC7BD,GAAG,GAAGC,GAAG,CAACI,QAAQ,GAAG,IAAI,GAAGL,GAAG;MACjC,CAAC,MAAM;QACLA,GAAG,GAAG,UAAU,GAAGA,GAAG;MACxB;IACF;;IAEA;IACAJ,KAAK,CAAC,UAAU,EAAEI,GAAG,CAAC;IACtBE,GAAG,GAAGR,QAAQ,CAACM,GAAG,CAAC;EACrB;;EAEA;EACA,IAAI,CAACE,GAAG,CAACO,IAAI,EAAE;IACb,IAAI,aAAa,CAACD,IAAI,CAACN,GAAG,CAACG,QAAQ,CAAC,EAAE;MACpCH,GAAG,CAACO,IAAI,GAAG,IAAI;IACjB,CAAC,MACI,IAAI,cAAc,CAACD,IAAI,CAACN,GAAG,CAACG,QAAQ,CAAC,EAAE;MAC1CH,GAAG,CAACO,IAAI,GAAG,KAAK;IAClB;EACF;EAEAP,GAAG,CAACQ,IAAI,GAAGR,GAAG,CAACQ,IAAI,IAAI,GAAG;;EAE1B;EACAR,GAAG,CAACS,EAAE,GAAGT,GAAG,CAACG,QAAQ,GAAG,KAAK,GAAGH,GAAG,CAACU,IAAI,GAAG,GAAG,GAAGV,GAAG,CAACO,IAAI;EACzD;EACAP,GAAG,CAACW,IAAI,GAAGX,GAAG,CAACG,QAAQ,GAAG,KAAK,GAAGH,GAAG,CAACU,IAAI,IAAIX,GAAG,IAAIA,GAAG,CAACQ,IAAI,IAAIP,GAAG,CAACO,IAAI,GAAG,EAAE,GAAI,GAAG,GAAGP,GAAG,CAACO,IAAK,CAAC;EAElG,OAAOP,GAAG;AACZ"},"metadata":{},"sourceType":"script","externalDependencies":[]}