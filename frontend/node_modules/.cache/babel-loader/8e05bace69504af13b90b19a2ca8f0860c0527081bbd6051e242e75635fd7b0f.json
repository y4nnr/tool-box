{"ast":null,"code":"/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty() {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR(opts) {\n  Polling.call(this, opts);\n  if (global.location) {\n    var isSSL = 'https:' == location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n    this.xd = opts.hostname != global.location.hostname || port != opts.port;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({\n    method: 'POST',\n    data: data,\n    isBinary: isBinary\n  });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request(opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.async = false !== opts.async;\n  this.data = undefined != opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.create(opts.isBinary, opts.supportsBinary);\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function (isBinary, supportsBinary) {\n  var xhr = this.xhr = new XMLHttpRequest({\n    agent: this.agent,\n    xdomain: this.xd\n  });\n  var self = this;\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    if (supportsBinary) {\n      // This has to be done after open because Firefox is stupid\n      // http://stackoverflow.com/questions/13216903/get-binary-data-with-xmlhttprequest-in-a-firefox-extension\n      xhr.responseType = 'arraybuffer';\n    }\n    if ('POST' == this.method) {\n      try {\n        if (isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = true;\n    }\n    xhr.onreadystatechange = function () {\n      var data;\n      try {\n        if (4 != xhr.readyState) return;\n        if (200 == xhr.status || 1223 == xhr.status) {\n          var contentType = xhr.getResponseHeader('Content-Type');\n          if (contentType === 'application/octet-stream') {\n            data = xhr.response;\n          } else {\n            if (!supportsBinary) {\n              data = xhr.responseText;\n            } else {\n              data = 'ok';\n            }\n          }\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(xhr.status);\n          }, 0);\n        }\n      } catch (e) {\n        self.onError(e);\n      }\n      if (null != data) {\n        self.onData(data);\n      }\n    };\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n  if (global.document) {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup();\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function () {\n  if ('undefined' == typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  this.xhr.onreadystatechange = empty;\n  try {\n    this.xhr.abort();\n  } catch (e) {}\n  if (global.document) {\n    delete Request.requests[this.index];\n  }\n  this.xhr = null;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nif (global.document) {\n  Request.requestsCount = 0;\n  Request.requests = {};\n  if (global.attachEvent) {\n    global.attachEvent('onunload', unloadHandler);\n  } else if (global.addEventListener) {\n    global.addEventListener('beforeunload', unloadHandler);\n  }\n}\nfunction unloadHandler() {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}","map":{"version":3,"names":["XMLHttpRequest","require","Polling","Emitter","inherit","debug","module","exports","XHR","Request","empty","opts","call","global","location","isSSL","protocol","port","xd","hostname","prototype","supportsBinary","request","uri","agent","doWrite","data","fn","isBinary","undefined","req","method","self","on","err","onError","sendXhr","doPoll","onData","pollXhr","async","create","xhr","xdomain","open","responseType","setRequestHeader","e","withCredentials","onreadystatechange","readyState","status","contentType","getResponseHeader","response","responseText","setTimeout","send","document","index","requestsCount","requests","onSuccess","emit","cleanup","abort","attachEvent","unloadHandler","addEventListener","i","hasOwnProperty"],"sources":["/home/y4n/node_modules/engine.io-client/lib/transports/polling-xhr.js"],"sourcesContent":["/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty(){}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR(opts){\n  Polling.call(this, opts);\n\n  if (global.location) {\n    var isSSL = 'https:' == location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = opts.hostname != global.location.hostname ||\n      port != opts.port;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function(opts){\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function(data, fn){\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function(err){\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function(){\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function(data){\n    self.onData(data);\n  });\n  req.on('error', function(err){\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request(opts){\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.async = false !== opts.async;\n  this.data = undefined != opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.create(opts.isBinary, opts.supportsBinary);\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function(isBinary, supportsBinary){\n  var xhr = this.xhr = new XMLHttpRequest({ agent: this.agent, xdomain: this.xd });\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    if (supportsBinary) {\n      // This has to be done after open because Firefox is stupid\n      // http://stackoverflow.com/questions/13216903/get-binary-data-with-xmlhttprequest-in-a-firefox-extension\n      xhr.responseType = 'arraybuffer';\n    }\n\n    if ('POST' == this.method) {\n      try {\n        if (isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = true;\n    }\n\n    xhr.onreadystatechange = function(){\n      var data;\n\n      try {\n        if (4 != xhr.readyState) return;\n        if (200 == xhr.status || 1223 == xhr.status) {\n          var contentType = xhr.getResponseHeader('Content-Type');\n          if (contentType === 'application/octet-stream') {\n            data = xhr.response;\n          } else {\n            if (!supportsBinary) {\n              data = xhr.responseText;\n            } else {\n              data = 'ok';\n            }\n          }\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function(){\n            self.onError(xhr.status);\n          }, 0);\n        }\n      } catch (e) {\n        self.onError(e);\n      }\n\n      if (null != data) {\n        self.onData(data);\n      }\n    };\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function() {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (global.document) {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function(){\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function(data){\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function(err){\n  this.emit('error', err);\n  this.cleanup();\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function(){\n  if ('undefined' == typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  this.xhr.onreadystatechange = empty;\n\n  try {\n    this.xhr.abort();\n  } catch(e) {}\n\n  if (global.document) {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function(){\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nif (global.document) {\n  Request.requestsCount = 0;\n  Request.requests = {};\n  if (global.attachEvent) {\n    global.attachEvent('onunload', unloadHandler);\n  } else if (global.addEventListener) {\n    global.addEventListener('beforeunload', unloadHandler);\n  }\n}\n\nfunction unloadHandler() {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}